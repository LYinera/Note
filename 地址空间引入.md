

### 1. 地址空间引入

1. MMU（内存管理单元），MMU主要进行地址映射与地址片选的工作。
   1. 地址映射：将物理地址与虚拟地址相互进行转换，来提供给CPU使用
   2. 地址片选：CPU同时与所有模块相连，例如UART模块，GPIO模块，内存模块等。现代CPU通过MMU来访问各个物理地址，MMU通过判断CPU发出的地址信息来判断CPU想要与什么模块通信，从而将该模块的片选线电平拉到有效水平（可能为低电平可能为高电平），从而达成与指定芯片通信。以上地址均为物理地址。
2. 有程序A，效果是接受一个值，将该值赋给变量i，并将i的值以及地址打印出来。拉起程序A并将其挂起，将i的值复制为1，地址输出为0x12345567。拉起一个新的A程序挂起，将i的值复制为2，地址输出仍然为0x12345567。此时出现问题，即同一地址存在不同的值=>程序中使用的非物理地址，而是虚拟地址。

### 2. 为什么需要虚拟地址？

1. 因为程序编译时需要将地址与符号写好，如果使用物理地址，那么每个函数将不能有重复地址存在需要手动编写不重复的物理地址，且程序不能同时拉起多个。因此引入虚拟地址，程序编译时符号连接过程使用虚拟地址，可以避免物理地址相同的情况，使用时由MMU进行分配。